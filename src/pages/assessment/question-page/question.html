<ion-header>
    <ion-navbar color="primary">
        
        <ion-title >{{ question.name }}</ion-title>
    </ion-navbar>
</ion-header>


<!-- ******* BEGIN CONTENT ****** -->
<ion-content padding>

        <ion-list>
            <ion-item>
                <ion-label>Implemented?</ion-label>
                <ion-select [(ngModel)]="question.implemented">
                    <ion-option value="yes">Yes</ion-option>
                    <ion-option value="no">No</ion-option>
                    <ion-option value="na">Not Applicable</ion-option>
                    <ion-option value="nas">Not Assessed</ion-option>
                </ion-select>
            </ion-item>
            <ion-item>
                <!--<ion-label floating>Comments</ion-label>-->
                <ion-textarea placeholder="Comments" [(ngModel)]="question.comments" rows="6"></ion-textarea>
            </ion-item>

            <ion-item text-wrap>
                <ion-label >Improvements Required?</ion-label>
                <ion-toggle [(ngModel)]="question.improvements" ></ion-toggle>
            </ion-item>
        </ion-list>

        <button ion-button full (click)="doCapturePhoto()" color="light" icon-left>
            <ion-icon name="images"></ion-icon>
            Capture Image
        </button>

        <ion-card *ngFor='let img of imgs'>
            <img *ngIf='img.name' [src]='img.tempUri'/>

            <ion-card-content>
                <p *ngIf="img.caption && !img.editing">{{ img.caption }}</p>
                 <ion-input type="text" value="" *ngIf="img.editing" [(ngModel)]="img.caption"></ion-input>
            </ion-card-content>

            <!-- FOR Image Operations -->
            <ion-row no-padding>
                <ion-col text-left>
                    <button *ngIf="img.caption && img.caption !='' && !img.editing" ion-button clear small color="primary" (click)="toggleImageMode(img)" icon-left>
                        <ion-icon name='create'></ion-icon>
                        Edit Caption
                    </button>
                    <button *ngIf="(!img.caption || img.caption == '') && !img.editing" ion-button clear small color="primary" (click)="toggleImageMode(img)" icon-left>
                        <ion-icon name='create'></ion-icon>
                        Add Caption
                    </button>
                    <button *ngIf="img.editing" ion-button clear small color="primary" (click)="toggleImageMode(img)" icon-left>
                        <ion-icon name='checkmark'></ion-icon>
                        Save
                    </button>
                    <button *ngIf="img.editing && (img.caption!='' || img.caption.length>0)" ion-button clear small color="primary" (click)="toggleImageMode(img)" icon-left>
                        <ion-icon name='checkmark'></ion-icon>
                        Cancel
                    </button>
                </ion-col>
                <ion-col text-right>
                    <button ion-button clear small color="primary" icon-left>
                        <ion-icon name='remove-circle'></ion-icon>
                        Delete
                    </button>
                </ion-col>
            </ion-row>
        </ion-card>

        <ion-card *ngFor='let savedImg of savedImgs'>
            <img [src]='savedImg.path'/>

            <ion-card-content>
                <p *ngIf="savedImg.caption && !savedImg.editing"> {{ savedImg.caption }} </p>
                 <ion-input type="text" value="" *ngIf="savedImg.editing" [(ngModel)]="savedImg.caption"></ion-input>
            </ion-card-content>

            <!-- FOR Image Operations -->
            <ion-row no-padding>
                <ion-col text-left>
                    <button *ngIf="savedImg.caption && savedImg.caption !='' && !savedImg.editing" ion-button clear small color="primary" (click)="toggleImageMode(savedImg)" icon-left>
                        <ion-icon name='create'></ion-icon>
                        Edit Caption
                    </button>
                    <button *ngIf="(!savedImg.caption || savedImg.caption == '') && !savedImg.editing" ion-button clear small color="primary" (click)="toggleImageMode(savedImg)" icon-left>
                        <ion-icon name='create'></ion-icon>
                        Add Caption
                    </button>
                    <button *ngIf="savedImg.editing" ion-button clear small color="primary" (click)="doSaveCaption(savedImg)" icon-left>
                        <ion-icon name='checkmark'></ion-icon>
                        Save
                    </button>
                    <button *ngIf="savedImg.editing && (savedImg.caption!='' || savedImg.caption.length>0)" ion-button clear small color="primary" (click)="toggleImageMode(savedImg)" icon-left>
                        <ion-icon name='checkmark'></ion-icon>
                        Cancel
                    </button>
                </ion-col>
                <ion-col text-right>
                    <button ion-button clear small color="primary" icon-left>
                        <ion-icon name='remove-circle'></ion-icon>
                        Delete
                    </button>
                </ion-col>
            </ion-row>
        </ion-card>

</ion-content>


<!-- ********* BEGING FOOTER ***** -->
<ion-footer no-border>
  <ion-toolbar>
    <ion-buttons start> 
        <button ion-button (click)="dismiss()">
            <span ion-text  showWhen="ios">Cancel</span>
            <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
        </button>
    </ion-buttons>
    <ion-buttons end>
        <button ion-button (click)="save()">
            <span ion-text  showWhen="ios">Save</span>
            <ion-icon name="md-checkmark-circle-outline" showWhen="android,windows"></ion-icon>
        </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>